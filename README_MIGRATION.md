# –ú–∏–≥—Ä–∞—Ü–∏—è Secure Messenger –Ω–∞ TypeScript

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø –ø—Ä–æ–µ–∫—Ç–∞
- **–ü–∞–ø–∫–∞:** `/home/neightn81/secure-messenger-backup-20251016-102455/`
- –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–∞

### 2. –°–æ–∑–¥–∞–Ω–∞ TypeScript —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞

```
client/
‚îú‚îÄ‚îÄ index.html              # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π HTML —à–∞–±–ª–æ–Ω
‚îú‚îÄ‚îÄ public/                 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ api/
    ‚îÇ   ‚îî‚îÄ‚îÄ http.client.ts  # HTTP API –∫–ª–∏–µ–Ω—Ç
    ‚îú‚îÄ‚îÄ components/
    ‚îÇ   ‚îî‚îÄ‚îÄ ui-manager.ts   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI
    ‚îú‚îÄ‚îÄ services/
    ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts       # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    ‚îÇ   ‚îú‚îÄ‚îÄ websocket.service.ts  # WebSocket –∫–ª–∏–µ–Ω—Ç
    ‚îÇ   ‚îú‚îÄ‚îÄ encryption.service.ts # End-to-end —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
    ‚îÇ   ‚îî‚îÄ‚îÄ audio.service.ts      # –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ styles/
    ‚îÇ   ‚îú‚îÄ‚îÄ main.css        # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å—Ç–∏–ª–µ–π
    ‚îÇ   ‚îú‚îÄ‚îÄ base.css        # –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ auth.css        # –°—Ç–∏–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ messenger.css   # –°—Ç–∏–ª–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
    ‚îÇ   ‚îî‚îÄ‚îÄ mobile.css      # –ú–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
    ‚îú‚îÄ‚îÄ types/
    ‚îÇ   ‚îî‚îÄ‚îÄ index.ts        # TypeScript —Ç–∏–ø—ã
    ‚îú‚îÄ‚îÄ utils/
    ‚îÇ   ‚îî‚îÄ‚îÄ helpers.ts      # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    ‚îî‚îÄ‚îÄ app.ts              # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

### 3. –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–±–æ—Ä–∫–∞
- **Vite** - –±—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –∏ dev server
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π JS
- **package.json** –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–í–ê–ñ–ù–û!)

–°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ node_modules:

```bash
cd /home/neightn81/secure-messenger

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ï—Å–ª–∏ –µ—Å—Ç—å sudo –¥–æ—Å—Ç—É–ø
sudo chown -R $USER:$USER node_modules .git
sudo chmod -R u+w node_modules .git

# –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞–ª–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ
rm -rf node_modules package-lock.json
npm install
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /home/neightn81/secure-messenger
npm install
```

### –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ backend
npm start

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ frontend (dev mode)
npm run client:dev

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend + frontend –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
npm run dev:all

# –°–æ–±—Ä–∞—Ç—å frontend –¥–ª—è production
npm run build
```

### –ü–æ—Ä—Ç—ã
- **Backend API**: `http://localhost:3001` (server.js)
- **Frontend Dev**: `http://localhost:3000` (Vite)
- **WebSocket**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è

## üìÅ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

### client/index.html
–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π HTML —à–∞–±–ª–æ–Ω - —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ DOM, –≤—Å–µ —Å—Ç–∏–ª–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ.

### client/src/app.ts
–ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `MessengerApp`:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### client/src/services/
–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏:
- **auth.service.ts** - –ª–æ–≥–∏–Ω, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, —Å–µ—Å—Å–∏—è
- **websocket.service.ts** - real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- **encryption.service.ts** - E2E —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- **audio.service.ts** - –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### client/src/api/http.client.ts
–ö–ª–∏–µ–Ω—Ç –¥–ª—è REST API:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ token
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è

### client/src/components/ui-manager.ts
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DOM:
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ UI —Å–æ–±—ã—Ç–∏–π

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### tsconfig.json
TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- ES2020
- DOM API
- Strict mode
- Path aliases (@/*)

### vite.config.js
Vite –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å:
- Proxy –¥–ª—è API (/api ‚Üí :3001)
- Hot Module Replacement
- Source maps
- Production –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

## üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –ë—ã–ª–æ (index.html 5807 —Å—Ç—Ä–æ–∫):
- ‚ùå –í—Å–µ —Å—Ç–∏–ª–∏ –≤ –æ–¥–Ω–æ–º `<style>` —Ç–µ–≥–µ
- ‚ùå –í–µ—Å—å JavaScript –≤ –æ–¥–Ω–æ–º `<script>` —Ç–µ–≥–µ
- ‚ùå –ù–µ—Ç –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏
- ‚ùå –ù–µ—Ç —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- ‚ùå –°–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

### –°—Ç–∞–ª–æ:
- ‚úÖ –°—Ç–∏–ª–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Ñ–∞–π–ª–∞–º
- ‚úÖ –ö–æ–¥ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –º–æ–¥—É–ª–∏
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å

## üìù Git –∫–æ–º–º–∏—Ç

–ò–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ .git/ (—Ñ–∞–π–ª—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç root), 
–∫–æ–º–º–∏—Ç –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é:

```bash
cd /home/neightn81/secure-messenger

# –ï—Å–ª–∏ –µ—Å—Ç—å sudo
sudo chown -R $USER:$USER .git

# –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç
git add -A
git commit -m "–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ TypeScript –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

- –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞
- –í—ã–Ω–µ—Å–µ–Ω—ã CSS –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- –†–∞–∑–¥–µ–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–∏—Å—ã
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ —Å Vite
- –î–æ–±–∞–≤–ª–µ–Ω–∞ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è

Co-authored-by: factory-droid[bot] <138933559+factory-droid[bot]@users.noreply.github.com>"
```

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: node_modules –∏ .git –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç root
   - **–†–µ—à–µ–Ω–∏–µ**: `sudo chown -R $USER:$USER .`

2. **npm install fails**: Permission denied
   - **–†–µ—à–µ–Ω–∏–µ**: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å node_modules

## üìö –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm run dev:all`
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
5. –°–æ–∑–¥–∞—Ç—å git –∫–æ–º–º–∏—Ç
6. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –Ω–µ–∑–∞–≤–∏—Å–∏–º
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞
- **DX**: Hot reload, TypeScript IntelliSense
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
